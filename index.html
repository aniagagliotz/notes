<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<link rel="stylesheet" href="https://use.typekit.net/vjq3fgl.css">
<style>

body { margin: 0; padding: 0; background-color: white; font-family: "noto-sans", sans-serif; }

#myDIV {
  width: 100vw; height: 100vh; position: fixed;
  text-align: center; padding-top: 15vh; z-index: 1;
}

#hideBtn {
  font-family: "deseo-medium", sans-serif; color: transparent;
  -webkit-text-stroke: 0.07vw black; font-size: 23vw; cursor: pointer;
}

.fixed-text, .fixed-text2  { position: fixed; font-size: 0.833vw; font-style: italic; z-index: 1000; pointer-events: none; }
.fixed-text { top: 2.6vw; left: 2.6vw; }
.fixed-text2 { bottom: 2.6vw; right: 2.6vw; }

#outer-circle {
  position: fixed; top: 3.66vw; right: 3.66vw; width: 15vw; height: 15vw;
  border: 0.07vw solid black; border-radius: 50%; display: flex;
  box-shadow: 0 0.366vw 0.366vw rgba(0.1,0.1,0.1,0.2);
  align-items: center; justify-content: center; z-index: 2000; background: white;
}
.inner-circle { width: 13vw; height: 13vw; border: 0.07vw solid black; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
textarea { width: 80%; height: 60%; border: none; outline: none; resize: none; background: transparent; text-align: center; font-size: 0.833vw; }

.submit {
  width: 5vw; height: 5vw; background: url('submit.png') no-repeat center/contain;
  border: none; cursor: pointer; position: absolute; top: 10vw; right: 1vw;
}

.submit:hover {
transform: scale(1.1);
  filter: brightness(1.2);
  transition: transform 0.2s ease, filter 0.2s ease;
}

#clearOutput img:hover{
  transform: scale(1.1);
  filter: brightness(1.2);
  transition: transform 0.2s ease, filter 0.2s ease;
}
.fixed-text3 img {
  position: fixed; top: 2.6vw; right: 5vw; width: 16vw; z-index: 10001;
  padding: 0.36vw 0.73vw; cursor: pointer;
}

#overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(5px);
  display: none; z-index: 10000;
}

.modal-container {
  position: absolute; 
  background: white; 
  width: 25vw; 
  max-height: 28vw;
  display: none; 
  z-index: 10005; 
  box-shadow: 0 0.732vw 2.928vw rgba(0,0,0,0.5); 
  border: 0.015vw solid black; 
  overflow-y: auto; overflow-x: hidden;
  pointer-events: all; 
}

.modal-content { display: flex; width: 100%; height: 100%; }

.modal { 
  flex: 1; padding: 1vw; overflow-y: auto; text-align: left; background: white; font-size: 0.833vw; 
}

.modal video { width: 100%; height: auto; margin-top: 0.732vw; }

.close-x {
  position: absolute; 
  top: 0.732vw; 
  right: 1.098vw; 
  color: rgb(0, 0, 0);
  font-size: 2.6vw; 
  cursor: pointer; 
  z-index: 11000; 
  display: none; 
  font-family: "noto-sans", sans-serif; 
}

#images img { 
  position: absolute; display: none; width: 7vw; cursor: pointer; z-index: 5; 
  transition: width 0.4s ease, z-index 0s; 
}
#images img:not(.scaled-thumb):hover {
  transform: scale(1.1);
  filter: brightness(1.2);
  transition: transform 0.2s ease, filter 0.2s ease;
}

.scaled-thumb {
  width: 25vw !important;
  z-index: 10002 !important;
  transform: scale(1); 
  filter: brightness(1);
}

#output { 
  position: fixed; 
  bottom: 7vw; left: 2.6vw; 
  width: 95vw; max-height: 15vw; 
  overflow-y: auto; 
  z-index: 1000; 
  line-height: 1.4;
  font-family: "noto-sans", sans-serif;
  font-size: 0.833vw;
}

#output p {
  padding-left: 0.5vw;
  border-left: 1px solid #000000; 
}

.fa-text { font-family: "noto-sans-arabic", sans-serif; font-size: 0.833vw; }
</style>
</head>
<body>

<div id="overlay"></div>
<div id="close-x" class="close-x">&times;</div>

<div id="myDIV"><a id="hideBtn">NOTES</a></div>

<div class="fixed-text">notes</div>
<div class="fixed-text2">*source: mainly my roommates</div>
<div class="fixed-text3">
    <img src="write.png" alt="Annotazioni">
</div>

<form id="outer-circle">
  <div class="inner-circle">
    <textarea id="textinput" placeholder="..."></textarea>
    <input type="submit" value="" class="submit">
  </div>
</form>

<div id="output"></div>
<button id="clearOutput" style="position:fixed; bottom:2.6vw; left:2.6vw; z-index:2001; background:none; border:none; cursor:pointer;">
    <img src="clear.png" alt="Clear" style="width:4vw;">
</button>

<div id="images">

  <img src="koskhol.jpeg" style="top:8vw; left:7vw;" onclick="openModal('m-k', this)">
  <div id="m-k" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">کصخل</span> -> KOSKHOL<br>
        by Erphaneh & Sara
        <br><br> It is a persian vulgar way of saying idiot. Literally: crazy pussy.
        <br>-Could there be a bigger koskhol than you?</p>
      </div>
    </div>
  </div>

  <img src="naiman.jpeg" style="top:10vw; left:15vw;" onclick="openModal('m-n', this)">
  <div id="m-n" class="modal-container">
    <div class="modal-content">
      <div class="modal">
       <p><span class="fa-text">نعيماً</span> -> NA’IMAN<br>
        by Ameer<br><br>
        lit. “bliss”, an arabic expression used for someone who just had a haircut or shower.</p>
      </div>
    </div>
  </div>

  <img src="baciarsiigomiti.jpeg" style="top:15vw; left:7vw;" onclick="openModal('m-b', this)">
  <div id="m-b" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p>BACIARSI I GOMITI<br>
        by me<br><br>
       Italian idiom: to be extremely lucky. Doing the impossible act of kissing your own elbow in joy.</p>
      </div>
    </div>
  </div>

  <img src="Isrif.jpeg" style="top: 18.08vw; left:23vw;" onclick="openModal('m-i', this)">
  <div id="m-i" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">إصرف ما في الجيب</span> -> ISRIF<br>
        by Ameer<br><br>
        Spend and God will send. An Arab proverb about trusting providence.</p>
      </div>
    </div>
  </div>

  <img src="salirò.jpeg" style="top:20vw; left:15vw;" onclick="openModal('m-s', this)">
  <div id="m-s" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p>SALIRÒ<br>
        Daniele Silvestri, 2002<br><br></p>
        <video controls><source src="videosalirò2.mp4" type="video/mp4"></video>
      </div>
    </div>
  </div>

  <img src="googoosh.jpeg" style="top:28.5vw; left:21vw;" onclick="openModal('m-g', this)">
  <div id="m-g" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">نیمه گمشده من</span> -> GOOGOOSH<br>
        1989<br><br></p>
        <video controls><source src="googoosh.mp4" type="video/mp4"></video>
      </div>
    </div>
  </div>

  <img src="divaneh.jpeg" style="top:28.5vw; left:13vw;" onclick="openModal('m-d', this)">
  <div id="m-d" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">دیوانه</span> -> DIVANEH<br>
        Damahi, 2019<br><br></p>
        <video controls><source src="divaneh.mp4" type="video/mp4"></video>
        <p><br>I fear that in this sleeping, lucky country<br>
I wake up and you’re not on this side of the border<br>
In sleep I’m the earth and rain and wheat<br>
I wake but you’re not the farmer<br>
I fear that you’ll leave and the house collapses<br>
I get crushed and you laugh at the architecture of debris<br>
I get displaced, my country in your hands<br>
alas if you don’t tie back the army of your hair<br>
<i>a crazy person enjoys seeing another crazy person<br>
I fear the moment you’re not crazy<br></i>
I keep mailing my dear life to your door<br>
someone knocks for a lifetime, and you’re not home<br>
you were created in my body like a crisis<br>
I became a crisis from a kiss<br>
the tragic end is awaiting me<br>
I fear that moment of becoming like Farhad<br>
the rein of my distress is out of my hands<br>
a jinn has gone into this poetic meter<br>
I fear becoming wasted, it’s a pity if you<br>
don’t gaze even at my torn apart self<br>
<i>a crazy person enjoys seeing another crazy person<br>
I fear the moment you’re not crazy<br></i>
I keep mailing my dear life to your door<br>
someone knocks for a lifetime, and you’re not home<br></p>
      </div>
    </div>
  </div>

  <img src="shab.jpeg" style="top:10vw; left:23vw;" onclick="openModal('m-h', this)">
  <div id="m-h" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">شب</span> -> SHAB<br>
        Faramarz Aslani, 2008<br><br></p>
        <video controls><source src="shab.mp4" type="video/mp4"></video>
      </div>
    </div>
  </div>

  <img src="bademjan.jpeg" style="top:6vw; left:31vw;" onclick="openModal('m-j', this)">
  <div id="m-j" class="modal-container">
    <div class="modal-content">
      <div class="modal">
        <p><span class="fa-text">کشک و بادمجان</span> -> KASHK-E BADEMJAN<br>
        by Sara<br><br>
(for two people)
Ingredient:
2 eggplants
1 onion
1 tablespoon dried mint
3-4 garlic cloves
3 tablespoons kashk
(or substitute with Greek
yogurt + a little salt)
1/2 teaspoon turmeric
Salt, Pepper, Oil
<br><br>
Peel the eggplants, cut them in half, and
sprinkle a little salt on top. Heat the oil
in a pan and fry the eggplants until soft and golden brown. Remove and set aside. Cook the onions and garlic.
Fry the chopped onions until golden brown, add the garlic and turmeric, salt, and pepper.
Add the eggplants to the pan and mash them with a fork or blender until smooth. Add the kask.
Reduce the heat and cook for 5-7 minutes. Then Noshe_E_Jan</p>
      </div>
    </div>
  </div>
</div>

<script>
const hideBtn = document.getElementById("hideBtn");
const thumbs = document.querySelectorAll("#images img");
const overlay = document.getElementById("overlay");
const closeX = document.getElementById("close-x");
const form = document.getElementById('outer-circle');
const textarea = document.getElementById('textinput');
const output = document.getElementById('output');

let activeModal = null;
let activeThumb = null;
let highestZ = 10001;

// Mostra le immagini e disattiva l'hover sul tasto NOTES
hideBtn.addEventListener("click", () => {
  thumbs.forEach(img => img.style.display = 'block');
  hideBtn.classList.add("active"); 
});

window.openModal = function(id, thumbElement) {
  // 1. Reset: se c'era un'altra immagine aperta, la chiudiamo
  if(activeModal) {
    activeModal.style.display = 'none';
    activeModal.querySelectorAll('video').forEach(v => v.pause());
  }
  if(activeThumb) activeThumb.classList.remove('scaled-thumb');

  // 2. Ingrandimento immagine
  thumbElement.classList.add('scaled-thumb');
  activeThumb = thumbElement;

  const modal = document.getElementById(id);
  
  // 3. Aspetta che l'immagine finisca di ingrandirsi (400ms) per calcolare la posizione
  setTimeout(() => {
    const rect = thumbElement.getBoundingClientRect(); 
    const offset = window.innerWidth * 0.02; // 2vw di spazio
    const modalWidth = window.innerWidth * 0.25; // 25vw definita nel CSS

    // Calcolo della posizione orizzontale (Left)
    let finalLeft = rect.right + offset;

    // Se il modale esce dal bordo destro dello schermo, lo sposta a sinistra dell'immagine
    if (finalLeft + modalWidth > window.innerWidth) {
      finalLeft = rect.left - modalWidth - offset;
    }

    // Applica coordinate dinamiche basate sulla posizione finale dell'immagine
    modal.style.top = (rect.top + window.scrollY) + "px"; 
    modal.style.left = finalLeft + "px";

    // 4. Gestione elementi UI e apparizione
    modal.insertBefore(closeX, modal.firstChild);
    highestZ++;
    modal.style.zIndex = highestZ;
    modal.style.display = 'block';
    overlay.style.display = 'block';
    closeX.style.display = 'block';
    activeModal = modal;
  }, 400); // Sincronizzato con transition: width 0.4s
};

function closeAll() {
  if (activeModal) {
    activeModal.querySelectorAll('video').forEach(v => {
        v.pause();
    });
    activeModal.style.display = 'none';
  }
  
  if (activeThumb) activeThumb.classList.remove('scaled-thumb');
  
  overlay.style.display = 'none';
  closeX.style.display = 'none';
  activeModal = null;
  activeThumb = null;
}

overlay.addEventListener('click', closeAll);
closeX.addEventListener('click', closeAll);

form.addEventListener('submit', e => {
  e.preventDefault();
  const val = textarea.value.trim();
  if (!val) return;
  const p = document.createElement('p');
  p.textContent = val;
  output.appendChild(p);
  output.scrollTop = output.scrollHeight; 
  textarea.value = '';
});

document.getElementById('clearOutput').addEventListener('click', () => {
  output.innerHTML = '';
});
</script>

</body>
</html>